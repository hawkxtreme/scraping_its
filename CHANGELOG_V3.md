# Changelog - ITS.1C.RU Scraper

## Version 3.0 - Universal Tree Navigation Parser (09.11.2025)

### üéØ Major Changes

#### ‚ú® New Features

**1. Parser V3 - Universal Tree-Based Navigation**
- –°–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä `src/parser_v3.py` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –¥–µ—Ä–µ–≤—å—è–º–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–¥–æ 4 —É—Ä–æ–≤–Ω–µ–π –≥–ª—É–±–∏–Ω—ã)
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞ —Å –∫–ª–∏–∫–∞–º–∏ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ (`li.doc a`) –∏–∑ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ URL —Å —è–∫–æ—Ä—è–º–∏ (#browse)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
- `https://its.1c.ru/db/v8327doc` - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ 1–° 8.3.27
- `https://its.1c.ru/db/metod8dev/*` - –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `https://its.1c.ru/db/metod81#browse:*` - –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è (—Ä–∞–∑–¥–µ–ª—ã —Å —è–∫–æ—Ä—è–º–∏)

**2. Dynamic Tree Expansion (`scraper.py`)**
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_expand_tree_and_collect_links()` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Playwright –¥–ª—è JavaScript-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–ª–∏–∫–æ–≤ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö URL

**3. Intelligent Parser Selection (`parser.py`)**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø–∞—Ä—Å–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ URL
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:
  - Parser V1 ‚Üí –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å `w_metadata_toc` (–ë–°–ü)
  - Parser V3 ‚Üí –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å `.tree` (v8327doc, metod8dev, metod81)
  - Parser V2 ‚Üí —É–¥–∞–ª–µ–Ω –∫–∞–∫ –Ω–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–π

```python
def get_parser_for_url(url):
    url_lower = url.lower()
    
    if ('/db/v8' in url_lower or 
        '/section/dev/' in url_lower or
        '/db/metod' in url_lower):
        return parser_v3
    else:
        return parser_v1  # –ë–°–ü –∏ –¥—Ä—É–≥–∏–µ —Å w_metadata_toc
```

**4. Enhanced Content Hash Calculation**
- –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ URL (—Å —è–∫–æ—Ä–µ–º) –≤ —Ä–∞—Å—á–µ—Ç —Ö–µ—à–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–µ–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º, –Ω–æ —Ä–∞–∑–Ω—ã–º–∏ —è–∫–æ—Ä—è–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `parser_v1.py` –∏ `parser_v3.py`:

```python
url_part = url if url else ""
content_hash = hash(f"{url_part}|{article_text}|{len(article_text)}")
```

**5. URL Passing to Parsers**
- –ü–µ—Ä–µ–¥–∞—á–∞ URL –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `scraper.scrape_single_article()` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `article_info['url']`

#### üîß Technical Improvements

**Tree Navigation Algorithm:**
```javascript
// JavaScript execution in browser context
const tree = document.querySelector('.tree');
const links = Array.from(tree.querySelectorAll('a'));

// Click on each link
links[i].scrollIntoView({behavior: 'auto', block: 'center'});
links[i].click();

// Extract content links after click
const docLinks = Array.from(document.querySelectorAll('li.doc a'));
```

**Recursive Processing:**
- –ì–ª—É–±–∏–Ω–∞ —Ä–µ–∫—É—Ä—Å–∏–∏: 4 —É—Ä–æ–≤–Ω—è (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `max_depth`)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ `processed_urls` Set
- –ü–µ—Ä–µ—á–∏—Ç—ã–≤–∞–Ω–∏–µ DOM –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–æ–∫

#### üìä Performance & Results

**Parsing Statistics:**
- **v8327doc**: 126 —Å—Ç–∞—Ç–µ–π (–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ 8.3.27)
- **metod8dev/-1**: 170 —Å—Ç–∞—Ç–µ–π (–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è, –∫–æ—Ä–µ–Ω—å)
- **metod8dev/3199**: 306 —Å—Ç–∞—Ç–µ–π (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
- **metod8dev/3190**: 303 —Å—Ç–∞—Ç–µ–π (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
- **metod81**: 507 —Å—Ç–∞—Ç–µ–π (5 —Ä–∞–∑–¥–µ–ª–æ–≤ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏)
- **v8std**: 229 —Å—Ç–∞—Ç–µ–π (—Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- –î–æ 16 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏: 2-4 –ø–æ—Ç–æ–∫–∞ –Ω–∞ —Ä–∞–∑–¥–µ–ª
- –û–±—â–µ–µ –≤—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤: ~30-40 –º–∏–Ω—É—Ç

### üóëÔ∏è Removed

**Parser V2 Deletion:**
- –£–¥–∞–ª–µ–Ω `src/parser_v2.py` –∫–∞–∫ –Ω–µ–≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–π
- –ü—Ä–∏—á–∏–Ω–∞: —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ v8std —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è Parser V1
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Parser V2 –ø–æ–∫—Ä—ã–≤–∞—é—Ç—Å—è Parser V1 –∏ V3

### üêõ Bug Fixes

**1. Anchor URLs Duplication**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç–∞—Ç—å–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —è–∫–æ—Ä—è–º–∏ (#browse:13:-1:X) –∏–º–µ–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö–µ—à
- **–†–µ—à–µ–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ URL –≤ —Ö–µ—à –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–§–∞–π–ª—ã**: `parser_v1.py`, `parser_v3.py`, `scraper.py`

**2. Tree Expansion Issues**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∞—Ä—Å–µ—Ä –Ω–∞—Ö–æ–¥–∏–ª —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ä–µ–≤–∞ (5-6 —Å—Å—ã–ª–æ–∫ –≤–º–µ—Å—Ç–æ 100+)
- **–†–µ—à–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ `click_and_extract`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–æ–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏

**3. Content Links Not Found**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ –∏–∑–≤–ª–µ–∫–∞–ª–∏—Å—å —Å—Å—ã–ª–∫–∏ –∏–∑ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ –ø–æ –¥–µ—Ä–µ–≤—É
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä —Å `.content a` –Ω–∞ `li.doc a`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

### üìù Code Quality

**Parser V3 Architecture:**
```python
async def _expand_tree_and_collect_links(self, page, base_url, max_depth=4):
    """
    –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ —Å—Å—ã–ª–∫–∏
    
    Algorithm:
    1. –ù–∞–π—Ç–∏ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ .tree
    2. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∫–∞–∂–¥—É—é —Å—Å—ã–ª–∫—É
    3. –ò–∑–≤–ª–µ—á—å li.doc a –∏–∑ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–ø—Ä–∞–≤–∞
    4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –¥–µ—Ä–µ–≤–µ
    5. –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ–≤—ã–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã
    """
    all_pages = []
    processed_urls = set()
    
    async def click_and_extract(current_depth=0):
        if current_depth >= max_depth:
            return
        
        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫ –¥–µ—Ä–µ–≤–∞
        tree_links = await page.evaluate('''() => {
            const tree = document.querySelector('.tree');
            return Array.from(tree.querySelectorAll('a')).map(link => ({
                href: link.href,
                text: link.textContent.trim()
            }));
        }''')
        
        # –ö–ª–∏–∫–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        for link in tree_links:
            # Click link
            await page.evaluate(f'...')
            
            # Extract content links
            content_links = await page.evaluate('''() => {
                return Array.from(document.querySelectorAll('li.doc a')).map(...)
            }''')
            
            # Recursive processing
            if new_tree_elements_found:
                await click_and_extract(current_depth + 1)
    
    await click_and_extract(current_depth=0)
    return all_pages
```

### üîÑ Migration Notes

**From Parser V1/V2 to V3:**
- Parser V3 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –¥–ª—è URL —Å `/db/v8*`, `/db/metod*`, `/section/dev/`
- –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ API –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Parser V1 –¥–ª—è –ë–°–ü —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

**Breaking Changes:**
- –£–¥–∞–ª–µ–Ω Parser V2 - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–∞–ø—Ä—è–º—É—é, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ V1 –∏–ª–∏ V3
- –ò–∑–º–µ–Ω–µ–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ `parse_article_page()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `url`

### üì¶ Dependencies

**–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- playwright
- beautifulsoup4
- asyncio
- Docker Browserless

### üéØ Use Cases

**Parser V3 –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**
1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
2. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
3. –°—Ç—Ä–∞–Ω–∏—Ü —Å —è–∫–æ—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (#browse)
4. –†–∞–∑–¥–µ–ª–æ–≤ —Å –ø–æ–¥—Ä–∞–∑–¥–µ–ª–∞–º–∏ –≥–ª—É–±–∂–µ 2 —É—Ä–æ–≤–Ω–µ–π

**–ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
```bash
# –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ 8.3.27
python main.py "https://its.1c.ru/db/v8327doc" --format markdown --parallel 16 --rag

# –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
python main.py "https://its.1c.ru/db/metod8dev/browse/13/-1/3199" --format markdown --parallel 3 --rag

# –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è —Å —è–∫–æ—Ä–µ–º
python main.py "https://its.1c.ru/db/metod81#browse:13:-1:2115:2335" --format markdown --parallel 2 --rag
```

### üìä Testing Results

**Tested URLs:**
- ‚úÖ https://its.1c.ru/db/v8327doc ‚Üí 126 —Å—Ç–∞—Ç–µ–π
- ‚úÖ https://its.1c.ru/db/metod8dev/browse/13/-1/ ‚Üí 170 —Å—Ç–∞—Ç–µ–π
- ‚úÖ https://its.1c.ru/db/metod8dev/browse/13/-1/3199 ‚Üí 306 —Å—Ç–∞—Ç–µ–π
- ‚úÖ https://its.1c.ru/db/metod8dev/browse/13/-1/3190 ‚Üí 303 —Å—Ç–∞—Ç–µ–π
- ‚úÖ https://its.1c.ru/db/metod81#browse:* ‚Üí 507 —Å—Ç–∞—Ç–µ–π (5 —Ä–∞–∑–¥–µ–ª–æ–≤)
- ‚úÖ https://its.1c.ru/db/v8std ‚Üí 229 —Å—Ç–∞—Ç–µ–π
- ‚úÖ https://its.1c.ru/db/bsp3111doc ‚Üí 2,938 —Å—Ç–∞—Ç–µ–π

**Total Articles Scraped:** 4,579

### üöÄ Performance Metrics

**Scraping Speed:**
- Single thread: ~1-2 —Å—Ç–∞—Ç—å–∏/—Å–µ–∫
- 16 parallel threads: ~15-20 —Å—Ç–∞—Ç–µ–π/—Å–µ–∫
- Total time for all sections: ~35-40 minutes

**Resource Usage:**
- CPU: 30-50% utilization (16 threads distributed)
- Memory: ~500MB per Python process
- Docker Browserless: ~1GB RAM

### üìñ Documentation

**New Files:**
- `src/parser_v3.py` - Universal tree parser
- `INDEX.md` - –ö–∞—Ç–∞–ª–æ–≥ –≤—Å–µ—Ö —Å–ø–∞—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
- `CHANGELOG.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

**Updated Files:**
- `src/parser.py` - Routing logic updated
- `src/scraper.py` - Added `_expand_tree_and_collect_links()`
- `src/parser_v1.py` - URL –≤ —Ö–µ—à –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**Deleted Files:**
- `src/parser_v2.py` - Removed as unused

### üéì Lessons Learned

**Key Insights:**
1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –¥–µ—Ä–µ–≤–∞ —Ç—Ä–µ–±—É–µ—Ç –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —Å –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–Ω–∏–µ–º DOM
2. JavaScript evaluation –≤ Playwright —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ Selenium –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö DOM-–æ–ø–µ—Ä–∞—Ü–∏–π
3. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
4. –í–∫–ª—é—á–µ–Ω–∏–µ URL –≤ —Ö–µ—à –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —è–∫–æ—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
5. –°–µ–ª–µ–∫—Ç–æ—Ä `li.doc a` —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ 1–° –ò–¢–°

**Best Practices:**
- –í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ DOM-–∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Set –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö URL
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –≥–ª—É–±–∏–Ω—É —Ä–µ–∫—É—Ä—Å–∏–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö –ª–∏–º–∏—Ç–∞—Ö –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω—ã–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º

---

## Version 1.0 - Initial Release

*–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏ –ø–∞—Ä—Å–µ—Ä–∞ (V1, V2) —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –∞–≤—Ç–æ—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–∞ hawkxtreme/scraping_its*

---

**–ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã:**
- Parser V3 development: AI Assistant (Claude Sonnet 4.5)
- Original project: hawkxtreme/scraping_its
- Testing & integration: Community contributors

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 09.11.2025  
**–í–µ—Ä—Å–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:** Python 3.12, Playwright, Docker Browserless

