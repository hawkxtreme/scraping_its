# –°–∫—Ä–∞–ø–ø–µ—Ä —Å—Ç–∞—Ç–µ–π 1–° –ò–¢–°

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–∫—Ä–∞–ø–∏–Ω–≥–∞ —Å—Ç–∞—Ç–µ–π —Å —Å–∞–π—Ç–∞ its.1c.ru –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
   ```bash
   docker run -p 3000:3000 browserless/chrome
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   git clone https://github.com/hawkxtreme/scraping_its
   cd scraping_its
   python -m venv venv
   venv\Scripts\activate  # Windows
   pip install -r requirements.txt
   playwright install chromium
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   ```bash
   copy .env-example .env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –≤—Ö–æ–¥–∞ –Ω–∞ 1–°
   ```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –°–∫–∞—á–∞—Ç—å –≤—Å–µ —Å—Ç–∞—Ç—å–∏ —Ä–∞–∑–¥–µ–ª–∞ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
python main.py https://its.1c.ru/db/cabinetdoc --format json

# –°–∫–∞—á–∞—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
python main.py https://its.1c.ru/db/cabinetdoc --format json pdf markdown

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–ø–µ—Ä–≤—ã–µ 5 —Å—Ç–∞—Ç–µ–π)
python main.py https://its.1c.ru/db/cabinetdoc --limit 5
```

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python:** 3.8+
- **Docker:** 20.10+ (–¥–ª—è browserless)
- **Playwright:** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–û–°:** Windows 10/11, Linux (Ubuntu 20.04+), macOS 11+


## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|---------|
| `url` | URL –¥–ª—è —Å–∫—Ä–∞–ø–∏–Ω–≥–∞ | `https://its.1c.ru/db/cabinetdoc` |
| `--format` | –§–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞ | `json`, `pdf`, `txt`, `markdown` |
| `--limit` | –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞—Ç–µ–π | `--limit 10` |
| `--parallel` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ | `--parallel 4` |
| `--update` | –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ | `--update` |
| `--rag` | –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è RAG | `--rag` |
| `--verbose` | –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | `--verbose` |

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

```bash
python main.py --help
```

## üìÅ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –§–æ—Ä–º–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|--------|----------|-------------|
| **JSON** | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –ü–æ–ª–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Å—Å—ã–ª–∫–∏ |
| **PDF** | –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–µ—á–∞—Ç–∏ | –¢–æ—á–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| **TXT** | –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç | –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä, –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è |
| **Markdown** | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç | GitHub-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π, RAG-–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ |

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –¢–∞–π–º–∞—É—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

```bash
# –î–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
python main.py https://its.1c.ru/db/cabinetdoc \
  --timeout 180 --retry-count 5 --delay 2

# –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  
python main.py https://its.1c.ru/db/cabinetdoc \
  --timeout 30 --retry-count 2 --delay 0.2
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 8 –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
python main.py https://its.1c.ru/db/cabinetdoc --parallel 8
```

### –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å JSON —Ñ–∞–π–ª—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ñ–æ—Ä–º–∞—Ç)
python main.py --merge --merge-dir out/cabinetdoc/json --max-files 100 --max-size 50

# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å Markdown —Ñ–∞–π–ª—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ñ–æ—Ä–º–∞—Ç)
python main.py --merge --merge-dir out/cabinetdoc/markdown --max-files 50

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞
python main.py --merge --merge-dir out/cabinetdoc/json --merge-format markdown --max-files 100

# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
python main.py --merge --merge-dir out/cabinetdoc/json --merge-stats
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- JSON —Ñ–∞–π–ª—ã ‚Üí `merge/cabinetdoc/json/merged_group_*.json` + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ `merge/cabinetdoc/`
- Markdown —Ñ–∞–π–ª—ã ‚Üí `merge/cabinetdoc/markdown/merged_group_*.md` + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ `merge/cabinetdoc/`

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [ADVANCED_USAGE.md](docs/ADVANCED_USAGE.md)  
> üìñ **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:** [FILE_MERGING.md](docs/FILE_MERGING.md)

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

- **`script_log.txt`** - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ (—Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ 10 –ú–ë)
- **`errors.log`** - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (—Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏ 5 –ú–ë)
- **Verbose —Ä–µ–∂–∏–º** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ —Å —Ñ–ª–∞–≥–æ–º `--verbose`

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ –æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏:** [LOGGING.md](docs/LOGGING.md)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
python -m pytest

# –°—Ü–µ–Ω–∞—Ä–Ω—ã–µ —Ç–µ—Å—Ç—ã
python -m pytest tests/test_scenario.py -v -s

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
python -m pytest tests/test_scenario.py::test_cabinetdoc_scenario_all_formats -v
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
scraping_its/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ src/                 # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ scraper.py       # –õ–æ–≥–∏–∫–∞ —Å–∫—Ä–∞–ø–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ parser*.py       # –ü–∞—Ä—Å–µ—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ file_manager.py  # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ logger.py        # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ utils.py         # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ tests/               # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ out/                 # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫—Ä–∞–ø–∏–Ω–≥–∞
‚îî‚îÄ‚îÄ docs/                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

```bash
# –°–∫–∞—á–∞—Ç—å –≤–µ—Å—å —Ä–∞–∑–¥–µ–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
python main.py https://its.1c.ru/db/erp25ltsdoc --format json pdf txt markdown

# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
python main.py https://its.1c.ru/db/cabinetdoc --update --format json pdf

# –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
python main.py https://its.1c.ru/db/cabinetdoc --no-scrape
```

### RAG-—Ä–µ–∂–∏–º –¥–ª—è AI —Å–∏—Å—Ç–µ–º

```bash
# Markdown —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è RAG
python main.py https://its.1c.ru/db/cabinetdoc --format markdown --rag
```

### –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
python main.py https://its.1c.ru/db/cabinetdoc --verbose

# –ë–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
python main.py https://its.1c.ru/db/cabinetdoc --retry-count 0
```

### –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å JSON —Ñ–∞–π–ª—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ñ–æ—Ä–º–∞—Ç)
python main.py --merge --merge-dir out/cabinetdoc/json --max-files 100
# ‚Üí merge/cabinetdoc/json/merged_group_*.json

# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å Markdown —Ñ–∞–π–ª—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ñ–æ—Ä–º–∞—Ç)
python main.py --merge --merge-dir out/cabinetdoc/markdown --max-files 50
# ‚Üí merge/cabinetdoc/markdown/merged_group_*.md

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞
python main.py --merge --merge-dir out/cabinetdoc/json --merge-format markdown --max-files 100
# ‚Üí merge/cabinetdoc/json/merged_group_*.md

# –°–∂–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
python main.py --merge --merge-dir out/cabinetdoc/json --compress
# ‚Üí merge/cabinetdoc/json/merged_group_*.json.gz
```

> üìñ **–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤:** [EXAMPLES.md](docs/EXAMPLES.md)

## ‚öñÔ∏è –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π:
- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ –ò–¢–° –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ò–õ–ò —É –≤–∞—Å –æ–ø–ª–∞—á–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç–µ–π –∞–∫—Ç–∏–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü–µ—á–∞—Ç—å"

## üõ£Ô∏è Roadmap

–¢–µ–∫—É—â–∏–µ –ø–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞:

- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏  
- üîÑ –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- üìã –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π
- üìã –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ DOCX

> üìñ **–ü–æ–¥—Ä–æ–±–Ω—ã–π roadmap:** [ROADMAP_ANALYSIS.md](ROADMAP_ANALYSIS.md)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE) —Ñ–∞–π–ª.

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** [GitHub Issues](https://github.com/hawkxtreme/scraping_its/issues)
